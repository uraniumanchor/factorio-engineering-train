{"version":3,"sources":["store/Init.ts","store/slices/Fluids.ts","views/Fluids.tsx","store/slices/Other.ts","store/slices/Stacks.ts","views/Stacks.tsx","views/Other.tsx","views/BlueprintString.tsx","App.tsx","store/Store.ts","index.tsx"],"names":["init","createAction","Fluids","createSlice","name","initialState","Object","fromEntries","FluidData","map","fluid","reducers","toggle","state","payload","extraReducers","builder","addCase","forEach","keys","includes","fluids","useSelector","dispatch","useDispatch","className","entries","k","v","Fragment","key","htmlFor","id","type","checked","onChange","Slice","actions","FuelType","Stacks","StackData","stack","setValue","value","Math","max","bykey","ka","kb","localeCompare","stacks","style","gridColumn","gridRow","sort","min","e","target","Other","dual","filler","fuel","toggleDual","setFiller","setFuel","other","chainEntities","entities","slice","entity","i","connections","red","push","entity_id","entity_number","connectEntities","entity1","entity2","side1","side2","color","addRailsAndSignals","numCars","railSections","ceil","concat","Array","from","_","length","position","x","y","direction","fourInserterMap","fourChestMap","twoInserterMap","twoChestMap","BlueprintString","useState","showUnpacked","setShowUnpacked","activeStacks","useMemo","filter","activeFluids","cars","carIndex","findIndex","car","used","reduce","s","existingStack","left","receiverStation","trainStop","control_behavior","circuit_condition","first_signal","constant","comparator","circuit_enable_disable","send_to_train","station","chests","flatMap","j","1","inserters","circuit_mode_of_operation","tanks","pumps","arithmeticCombinator","arithmetic_conditions","second_constant","operation","output_signal","2","constantCombinator","roboport","read_logistics","read_robot_stats","constructionInserter","logisticInserter","request_filters","index","count","lastPump","lastTank","lastInserter","lastChest","item","label","tiles","icons","schedules","version","providerStation","insertersAndChests","four","fourStacks","offset","l","two","twoStacks","trailingLocomotive","leadLocomotive","orientation","slots","inventory","filters","fuelId","find","locomotives","schedule","wait_conditions","compare_type","ticks","book","blueprints","blueprint","active_index","bookstring","btoa","pako","deflate","JSON","stringify","blueprint_book","to","border","wordBreak","textAlign","margin","onClick","App","display","gridTemplateColumns","reducer","combineReducers","store","configureStore","devTools","process","preloadedState","hash","window","location","trim","serializedState","inflate","atob","localStorage","getItem","parse","err","loadState","subscribe","setItem","saveState","getState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9f7689a2.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\n\nexport const init = createAction('init');\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport FluidData from '../../data/fluid.json';\nimport { init } from '../Init';\n\nexport const Fluids = createSlice({\n  name: 'Fluids',\n  initialState: Object.fromEntries(FluidData.map((fluid) => [fluid, false])),\n  reducers: {\n    toggle(state, { payload }: PayloadAction<string>) {\n      state[payload] = !state[payload];\n    },\n  },\n  extraReducers: (builder) =>\n    builder.addCase(init, (state) => {\n      FluidData.forEach((fluid) => (state[fluid] = state[fluid] || false));\n      Object.keys(state).forEach((fluid) => {\n        if (!FluidData.includes(fluid)) {\n          delete state[fluid];\n        }\n      });\n    }),\n});\n","import { Fluids as Slice } from '../store/slices/Fluids';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StoreState } from '../store/Store';\nimport React from 'react';\n\nimport './Fluids.css';\n\nexport function Fluids() {\n  const fluids = useSelector((state: StoreState) => state.fluids);\n  const dispatch = useDispatch();\n  return (\n    <div className='Fluids'>\n      <h2>Fluids</h2>\n      {Object.entries(fluids).map(([k, v]) => (\n        <React.Fragment key={k}>\n          <label htmlFor={k}>{k}</label>\n          <input id={k} type='checkbox' checked={v} onChange={() => dispatch(Slice.actions.toggle(k))} />\n        </React.Fragment>\n      ))}\n    </div>\n  );\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport StackData from '../../data/stacks.json';\nimport { init } from '../Init';\n\nexport enum FuelType {\n  wood = 'wood',\n  coal = 'coal',\n  solidFuel = 'solid-fuel',\n  rocketFuel = 'rocket-fuel',\n  nuclearFuel = 'nuclear-fuel',\n}\n\ninterface OtherState {\n  dual: boolean;\n  filler: keyof typeof StackData | '--';\n  fuel: FuelType | '--';\n}\n\nexport const Other = createSlice({\n  name: 'Other',\n  initialState: {\n    dual: true,\n    filler: 'artillery-shell',\n    fuel: '--',\n  } as OtherState,\n  reducers: {\n    toggleDual(state) {\n      state.dual = !state.dual;\n    },\n    setFiller(state, { payload }: PayloadAction<keyof typeof StackData | '--'>) {\n      state.filler = payload;\n    },\n    setFuel(state, { payload }: PayloadAction<FuelType | '--'>) {\n      state.fuel = payload;\n    },\n  },\n  extraReducers: (builder) =>\n    builder.addCase(init, (state) => {\n      state.dual = state.dual == null ? true : state.dual;\n      state.filler = state.filler || 'artillery-shell';\n      state.fuel = state.fuel || '--';\n    }),\n});\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport StackData from '../../data/stacks.json';\nimport { init } from '../Init';\n\ninterface SetValuePayload {\n  name: keyof typeof StackData;\n  value: number;\n}\n\ntype StacksState = {\n  [P in keyof typeof StackData]: number;\n};\n\nexport const Stacks = createSlice({\n  name: 'Stacks',\n  initialState: Object.fromEntries(Object.keys(StackData).map((stack) => [stack, 0])) as StacksState,\n  reducers: {\n    setValue(state, { payload: { name, value } }: PayloadAction<SetValuePayload>) {\n      state[name] = value;\n    },\n  },\n  extraReducers: (builder) =>\n    builder.addCase(init, (state) => {\n      Object.keys(StackData).forEach(\n        (stack) => (state[stack as keyof typeof StackData] = Math.max(state[stack as keyof typeof StackData], 0) || 0)\n      );\n      Object.keys(state).forEach((stack) => {\n        if (!StackData[stack as keyof typeof StackData]) {\n          delete state[stack as keyof typeof StackData];\n        }\n      });\n    }),\n});\n","import { Stacks as Slice } from '../store/slices/Stacks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StoreState } from '../store/Store';\nimport React from 'react';\nimport StackData from '../data/stacks.json';\n\nimport './Stacks.css';\n\nfunction bykey([ka, _a]: [string, number], [kb, _b]: [string, number]) {\n  return ka.localeCompare(kb);\n}\n\nexport function Stacks() {\n  const stacks = useSelector((state: StoreState) => state.stacks);\n  const dispatch = useDispatch();\n  return (\n    <div className='Stacks'>\n      <h2 style={{ gridColumn: 'span 3', gridRow: 'span 3' }}>Item Stacks</h2>\n      {Object.entries(stacks)\n        .sort(bykey)\n        .map(([k, v]) => (\n          <React.Fragment key={k}>\n            <label htmlFor={k}>{k}</label>\n\n            <input\n              id={k}\n              type='number'\n              value={v}\n              min={0}\n              onChange={(e) =>\n                dispatch(Slice.actions.setValue({ name: k as keyof typeof stacks, value: +e.target.value }))\n              }\n            />\n            <div>({(v * StackData[k as keyof typeof stacks]) as number})</div>\n          </React.Fragment>\n        ))}\n    </div>\n  );\n}\n","import { FuelType, Other as Slice } from '../store/slices/Other';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StoreState } from '../store/Store';\nimport React from 'react';\nimport StackData from '../data/stacks.json';\n\nimport './Other.css';\n\nexport function Other() {\n  const other = useSelector((state: StoreState) => state.other);\n  const dispatch = useDispatch();\n  return (\n    <div className='Other'>\n      <h2>Other</h2>\n      <label htmlFor='dual'>Use Dual-Headed</label>\n      <input id='dual' type='checkbox' checked={other.dual} onChange={() => dispatch(Slice.actions.toggleDual())} />\n      <label htmlFor='filler'>Filler</label>\n      <select\n        id='filler'\n        value={other.filler}\n        onChange={(e) => dispatch(Slice.actions.setFiller(e.target.value as keyof typeof StackData | '--'))}\n      >\n        <option>--</option>\n        {Object.keys(StackData).map((k) => (\n          <option key={k}>{k}</option>\n        ))}\n      </select>\n      <label htmlFor='fuel'>Fuel</label>\n      <select\n        id='fuel'\n        value={other.fuel}\n        onChange={(e) => dispatch(Slice.actions.setFuel(e.target.value as FuelType | '--'))}\n      >\n        <option>--</option>\n        {Object.entries(FuelType).map(([k, v]) => (\n          <option key={k} value={k}>\n            {v}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { StoreState } from '../store/Store';\nimport React, { useMemo, useState } from 'react';\nimport { Blueprint, BlueprintBook, Entity, Schedule } from '../types/Interfaces';\nimport pako from 'pako';\nimport StackData from '../data/stacks.json';\nimport { FuelType } from '../store/slices/Other';\n\nfunction chainEntities(entities: Entity[]) {\n  entities.slice(1).forEach((entity, i) => {\n    entity.connections?.['1']?.red?.push({\n      entity_id: entities[i].entity_number,\n    });\n  });\n  entities.slice(0, -1).forEach((entity, i) => {\n    entity.connections?.['1']?.red?.push({\n      entity_id: entities[i + 1].entity_number,\n    });\n  });\n}\n\nfunction connectEntities(\n  entity1: Entity,\n  entity2: Entity,\n  { side1 = '1', side2 = '1', color = 'red' }: { side1?: '1' | '2'; side2?: '1' | '2'; color?: 'green' | 'red' } = {}\n) {\n  entity1.connections?.[side1]?.[color]?.push({\n    entity_id: entity2.entity_number,\n  });\n  entity2.connections?.[side2]?.[color]?.push({\n    entity_id: entity1.entity_number,\n  });\n}\n\nfunction addRailsAndSignals(entities: Entity[], numCars: number, dual: boolean) {\n  const railSections = Math.ceil((numCars + (dual ? 2 : 1)) * 3.5) + (dual ? 1 : 2);\n  entities = entities.concat(\n    Array.from(Array(railSections).keys()).map((_, i) => ({\n      entity_number: entities.length + 1 + i,\n      name: 'straight-rail',\n      position: {\n        x: -2 * (railSections - i - (dual ? 1 : 2)),\n        y: -2,\n      },\n      direction: 2,\n    }))\n  );\n  if (dual) {\n    entities.push({\n      entity_number: entities.length + 1,\n      name: 'rail-signal',\n      position: {\n        x: 0.5 - 2 * railSections + 1,\n        y: -3.5,\n      },\n      direction: 2,\n    });\n  } else {\n    entities.push({\n      entity_number: entities.length + 1,\n      name: 'rail-signal',\n      position: {\n        x: 1.5,\n        y: -0.5,\n      },\n      direction: 6,\n    });\n  }\n  entities.push({\n    entity_number: entities.length + 1,\n    name: 'rail-signal',\n    position: {\n      x: 0.5 - 2 * railSections + (dual ? 1 : 3),\n      y: -0.5,\n    },\n    direction: 6,\n  });\n\n  return entities;\n}\n\nconst fourInserterMap = [-4.5, -3.5, -0.5, 0.5];\nconst fourChestMap = [-6.5, -5.5, 1.5, 2.5];\nconst twoInserterMap = [-3.5, -0.5];\nconst twoChestMap = [-4.5, 0.5];\n\nexport function BlueprintString() {\n  const [showUnpacked, setShowUnpacked] = useState(false);\n  const { fluids, stacks, other } = useSelector((state: StoreState) => state);\n  const activeStacks = useMemo(() => Object.entries(stacks).filter(([_, v]) => v), [stacks]);\n  const activeFluids = useMemo(() => Object.entries(fluids).filter(([_, v]) => v), [fluids]);\n\n  const cars: [string, number][][] = useMemo(() => {\n    const cars: [string, number][][] = [];\n    activeStacks.forEach((stack) => {\n      let carIndex = cars.findIndex((car) => {\n        const used = car.reduce((s, existingStack) => s + existingStack[1], 0);\n        // only use the last chest slot if it's an exact match, otherwise we can't do filler\n        return (car.length < 23 && used + stack[1] <= 40) || (car.length === 23 && used + stack[1] === 40);\n      });\n      if (carIndex === -1) {\n        carIndex = cars.length;\n        cars.push([]);\n      }\n      cars[carIndex].push(stack);\n    });\n    if (other.filler !== '--') {\n      cars.forEach((car) => {\n        const left = 40 - car.reduce((s, existingStack) => s + existingStack[1], 0);\n        if (left > 0 && car.length < 24) {\n          car.push([other.filler, left]);\n        }\n      });\n    }\n    return cars;\n  }, [activeStacks, other.filler]);\n  const receiverStation: Blueprint = useMemo(() => {\n    let entities: Entity[] = [];\n    const trainStop: Entity = {\n      entity_number: entities.length + 1,\n      name: 'train-stop',\n      position: {\n        x: 0,\n        y: 0,\n      },\n      direction: 2,\n      control_behavior: {\n        circuit_condition: {\n          first_signal: {\n            type: 'virtual',\n            name: 'signal-anything',\n          },\n          constant: 0,\n          comparator: '>',\n        },\n        circuit_enable_disable: true,\n        send_to_train: false,\n      },\n      station: 'Engineering Dropoff',\n    };\n    entities.push(trainStop);\n    const chests: Entity[] = cars.flatMap((_, i) =>\n      Array.from(Array(6).keys()).map((j) => ({\n        entity_number: entities.length + 1 + j + i * 6,\n        name: 'logistic-chest-storage',\n        position: {\n          x: -5.5 + j - (cars.length - i + activeFluids.length) * 7,\n          y: 0.5,\n        },\n        connections: {\n          1: { red: [] },\n        },\n      }))\n    );\n    entities = entities.concat(chests);\n    const inserters: Entity[] = cars.flatMap((_, i) =>\n      Array.from(Array(6).keys()).map((j) => ({\n        entity_number: entities.length + 1 + j + i * 6,\n        name: 'stack-filter-inserter',\n        position: {\n          x: -5.5 + j - (cars.length - i + activeFluids.length) * 7,\n          y: -0.5,\n        },\n        control_behavior: {\n          circuit_mode_of_operation: 1,\n        },\n        connections: {\n          1: { red: [] },\n        },\n      }))\n    );\n    entities = entities.concat(inserters);\n    const tanks: Entity[] = activeFluids.flatMap((_, i) => [\n      {\n        entity_number: entities.length + 1 + i * 2,\n        name: 'storage-tank',\n        direction: 2,\n        position: {\n          x: -4.5 - 7 * (activeFluids.length - i),\n          y: -6.5,\n        },\n        connections: {\n          1: {\n            red: [],\n          },\n        },\n      },\n      {\n        entity_number: entities.length + 2 + i * 2,\n        name: 'storage-tank',\n        position: {\n          x: -1.5 - 7 * (activeFluids.length - i),\n          y: -6.5,\n        },\n        connections: {\n          1: {\n            red: [],\n          },\n        },\n      },\n    ]);\n    entities = entities.concat(tanks);\n    const pumps: Entity[] = activeFluids.map(([fluid], i) => ({\n      entity_number: entities.length + 1 + i,\n      name: 'pump',\n      position: {\n        x: -0.5 - 7 * (activeFluids.length - i),\n        y: -4,\n      },\n      control_behavior: {\n        circuit_condition: {\n          first_signal: {\n            type: 'fluid',\n            name: fluid,\n          },\n          constant: -15000,\n          comparator: '>',\n        },\n      },\n      connections: {\n        1: {\n          red: [],\n        },\n      },\n    }));\n    entities = entities.concat(pumps);\n    const arithmeticCombinator: Entity = {\n      entity_number: entities.length + 1,\n      name: 'arithmetic-combinator',\n      position: {\n        x: -6,\n        y: 1.5,\n      },\n      direction: 2,\n      control_behavior: {\n        arithmetic_conditions: {\n          first_signal: {\n            type: 'virtual',\n            name: 'signal-each',\n          },\n          second_constant: -1,\n          operation: '*',\n          output_signal: {\n            type: 'virtual',\n            name: 'signal-each',\n          },\n        },\n      },\n      connections: {\n        1: {\n          red: [],\n        },\n        2: {\n          red: [],\n        },\n      },\n    };\n    entities.push(arithmeticCombinator);\n    const constantCombinator: Entity = {\n      entity_number: entities.length + 1,\n      name: 'constant-combinator',\n      direction: 6,\n      position: {\n        x: -5.5,\n        y: -0.5,\n      },\n    };\n    entities.push(constantCombinator);\n    const roboport: Entity = {\n      entity_number: entities.length + 1,\n      name: 'roboport',\n      position: {\n        x: -21,\n        y: 3,\n      },\n      control_behavior: {\n        read_logistics: false,\n        read_robot_stats: true,\n      },\n      connections: {\n        '1': {\n          red: [],\n        },\n      },\n    };\n    entities.push(roboport);\n    const constructionInserter: Entity = {\n      entity_number: entities.length + 1,\n      name: 'fast-inserter',\n      position: {\n        x: -22.5,\n        y: 5.5,\n      },\n      direction: 4,\n      control_behavior: {\n        circuit_condition: {\n          first_signal: {\n            type: 'virtual',\n            name: 'signal-X',\n          },\n          constant: 50,\n          comparator: '<',\n        },\n      },\n      connections: {\n        '1': {\n          red: [],\n        },\n      },\n    };\n    entities.push(constructionInserter);\n    const logisticInserter: Entity = {\n      entity_number: entities.length + 1,\n      name: 'fast-inserter',\n      position: {\n        x: -21.5,\n        y: 5.5,\n      },\n      direction: 4,\n      control_behavior: {\n        circuit_condition: {\n          first_signal: {\n            type: 'virtual',\n            name: 'signal-Z',\n          },\n          constant: 50,\n          comparator: '<',\n        },\n      },\n      connections: {\n        '1': {\n          red: [],\n        },\n      },\n    };\n    entities.push(logisticInserter);\n    entities.push({\n      entity_number: entities.length + 1,\n      name: 'logistic-chest-requester',\n      position: {\n        x: -22.5,\n        y: 6.5,\n      },\n      request_filters: [\n        {\n          index: 1,\n          name: 'logistic-robot',\n          count: 50,\n        },\n      ],\n    });\n    entities.push({\n      entity_number: entities.length + 1,\n      name: 'logistic-chest-requester',\n      position: {\n        x: -21.5,\n        y: 6.5,\n      },\n      request_filters: [\n        {\n          index: 1,\n          name: 'construction-robot',\n          count: 50,\n        },\n      ],\n    });\n    entities = addRailsAndSignals(entities, cars.length + activeFluids.length, other.dual);\n\n    connectEntities(roboport, logisticInserter);\n    connectEntities(logisticInserter, constructionInserter);\n    connectEntities(arithmeticCombinator, constantCombinator, { side1: '2' });\n    connectEntities(arithmeticCombinator, trainStop, { side1: '2' });\n    chainEntities(inserters);\n    chainEntities(chests);\n    chainEntities(pumps);\n    chainEntities(tanks);\n    const lastPump = pumps.slice(-1)[0];\n    const lastTank = tanks.slice(-1)[0];\n    const lastInserter = inserters.slice(-1)[0];\n    const lastChest = chests.slice(-1)[0];\n    if (lastPump) {\n      connectEntities(lastTank, arithmeticCombinator, { side2: '1' });\n      connectEntities(lastPump, arithmeticCombinator, { side2: '2' });\n      if (lastInserter) {\n        connectEntities(pumps[0], lastInserter);\n        connectEntities(tanks[0], lastChest);\n      }\n    } else if (lastInserter) {\n      connectEntities(lastChest, arithmeticCombinator, { side2: '1' });\n      connectEntities(lastInserter, arithmeticCombinator, { side2: '2' });\n    }\n    return {\n      item: 'blueprint',\n      label: 'Engineering Receiver',\n      entities: entities,\n      tiles: [],\n      icons: [],\n      schedules: [],\n      version: 77311705089,\n    };\n  }, [activeFluids, cars, other.dual]);\n  const providerStation: Blueprint = useMemo(() => {\n    let entities: Entity[] = [];\n    const trainStop: Entity = {\n      entity_number: entities.length + 1,\n      name: 'train-stop',\n      position: {\n        x: 0,\n        y: 0,\n      },\n      direction: 2,\n      station: 'Engineering Pickup',\n    };\n    entities.push(trainStop);\n    const insertersAndChests: Entity[] = cars.flatMap((car, i) => {\n      const four = Math.max(0, Math.ceil((car.length - 12) / 2));\n      const fourStacks: Entity[] =\n        four !== 0\n          ? Array.from(Array(four).keys()).flatMap((j) =>\n              Array.from(\n                Array(j === four - 1 && car.length % 4 !== 0 && four * 4 > car.length ? car.length % 4 : 4).keys()\n              ).flatMap((k) => {\n                const stack = car[j * 4 + k];\n                const offset = (cars.slice(0, i).reduce((l, car) => l + car.length, 0) + j * 4 + k) * 2;\n\n                return [\n                  {\n                    entity_number: entities.length + offset + 1,\n                    name: 'long-handed-inserter',\n                    position: {\n                      x: -5.5 + j - (cars.length - i + (other.dual ? 0 : activeFluids.length)) * 7,\n                      y: fourInserterMap[k],\n                    },\n                    direction: k >= 2 ? 4 : 0,\n                  },\n                  {\n                    entity_number: entities.length + offset + 2,\n                    name: 'logistic-chest-requester',\n                    position: {\n                      x: -5.5 + j - (cars.length - i + (other.dual ? 0 : activeFluids.length)) * 7,\n                      y: fourChestMap[k],\n                    },\n                    request_filters: [\n                      {\n                        index: 1,\n                        name: stack[0],\n                        count: stack[1] * StackData[stack[0] as keyof typeof StackData],\n                      },\n                    ],\n                  },\n                ];\n              })\n            )\n          : [];\n      const two = Math.ceil((car.length - four * 4) / 2);\n\n      const twoStacks: Entity[] =\n        two !== 0\n          ? Array.from(Array(two).keys()).flatMap((j) =>\n              Array.from(Array(j === two - 1 && car.length % 2 !== 0 ? car.length % 2 : 2).keys()).flatMap((k) => {\n                const stack = car[j * 2 + four * 4 + k];\n                const offset = (cars.slice(0, i).reduce((l, car) => l + car.length, 0) + four * 4 + j * 2 + k) * 2;\n                return [\n                  {\n                    entity_number: entities.length + offset + 1,\n                    name: 'fast-inserter',\n                    position: {\n                      x: -5.5 + j + four - (cars.length - i + (other.dual ? 0 : activeFluids.length)) * 7,\n                      y: twoInserterMap[k],\n                    },\n                    direction: k >= 1 ? 4 : 0,\n                  },\n                  {\n                    entity_number: entities.length + offset + 2,\n                    name: 'logistic-chest-requester',\n                    position: {\n                      x: -5.5 + j + four - (cars.length - i + (other.dual ? 0 : activeFluids.length)) * 7,\n                      y: twoChestMap[k],\n                    },\n                    request_filters: [\n                      {\n                        index: 1,\n                        name: stack[0],\n                        count: stack[1] * StackData[stack[0] as keyof typeof StackData],\n                      },\n                    ],\n                  },\n                ];\n              })\n            )\n          : [];\n      return [...fourStacks, ...twoStacks];\n    });\n    entities = entities.concat(insertersAndChests);\n    const tanks: Entity[] = activeFluids.flatMap((_, i) => [\n      {\n        entity_number: entities.length + 1 + i * 2,\n        name: 'storage-tank',\n        direction: 2,\n        position: {\n          x: -4.5 - 7 * (activeFluids.length - i + (other.dual ? cars.length : 0)),\n          y: -6.5,\n        },\n      },\n      {\n        entity_number: entities.length + 2 + i * 2,\n        name: 'storage-tank',\n        position: {\n          x: -1.5 - 7 * (activeFluids.length - i + (other.dual ? cars.length : 0)),\n          y: -6.5,\n        },\n      },\n    ]);\n    entities = entities.concat(tanks);\n    const pumps: Entity[] = activeFluids.map((_, i) => ({\n      entity_number: entities.length + 1 + i,\n      name: 'pump',\n      position: {\n        x: -0.5 - 7 * (activeFluids.length - i + (other.dual ? cars.length : 0)),\n        y: -4,\n      },\n      direction: 4,\n    }));\n    entities = entities.concat(pumps);\n    entities = addRailsAndSignals(entities, cars.length + activeFluids.length, other.dual);\n    const leadLocomotive: Entity = {\n      entity_number: entities.length + 1,\n      name: 'locomotive',\n      position: {\n        x: -3,\n        y: -2,\n      },\n      orientation: 0.25,\n    };\n    entities.push(leadLocomotive);\n    let trailingLocomotive: Entity | undefined;\n    if (other.dual) {\n      trailingLocomotive = {\n        entity_number: entities.length + 1,\n        name: 'locomotive',\n        position: {\n          x: -10 - (cars.length + activeFluids.length) * 7,\n          y: -2,\n        },\n        orientation: 0.75,\n      };\n      entities.push(trailingLocomotive);\n    }\n    entities = entities.concat(\n      activeFluids.map((_, i) => ({\n        entity_number: entities.length + 1 + i,\n        name: 'fluid-wagon',\n        position: {\n          x: -3 - (activeFluids.length - i + (other.dual ? cars.length : 0)) * 7,\n          y: -2,\n        },\n        orientation: 0.75,\n      }))\n    );\n    entities = entities.concat(\n      cars.map((slots, i) => ({\n        entity_number: entities.length + 1 + i,\n        name: 'cargo-wagon',\n        position: {\n          x: -3 - (cars.length - i + (other.dual ? 0 : activeFluids.length)) * 7,\n          y: -2,\n        },\n        inventory: {\n          filters: slots.flatMap(([name, stacks], i) =>\n            Array.from(Array(stacks).keys()).map((j) => ({\n              name: name,\n              index: 1 + j + slots.slice(0, i).reduce((s, [_, number]) => s + number, 0),\n            }))\n          ),\n        },\n        orientation: 0.75,\n      }))\n    );\n    if (other.fuel !== '--') {\n      const fuelId = Object.entries(FuelType).find(([k, v]) => k === other.fuel)?.[1]!;\n      entities.push({\n        entity_number: entities.length + 1,\n        name: 'logistic-chest-requester',\n        position: {\n          x: -3.5,\n          y: -4.5,\n        },\n        request_filters: [\n          {\n            index: 1,\n            name: fuelId,\n            count: StackData[fuelId as keyof typeof StackData] * 3,\n          },\n        ],\n      });\n      entities.push({\n        entity_number: entities.length + 1,\n        name: 'fast-inserter',\n        position: {\n          x: -3.5,\n          y: -3.5,\n        },\n      });\n      if (other.dual) {\n        entities.push({\n          entity_number: entities.length + 1,\n          name: 'logistic-chest-requester',\n          position: {\n            x: -9.5 - (cars.length + activeFluids.length) * 7,\n            y: -4.5,\n          },\n          request_filters: [\n            {\n              index: 1,\n              name: fuelId,\n              count: StackData[fuelId as keyof typeof StackData] * 3,\n            },\n          ],\n        });\n        entities.push({\n          entity_number: entities.length + 1,\n          name: 'fast-inserter',\n          position: {\n            x: -9.5 - (cars.length + activeFluids.length) * 7,\n            y: -3.5,\n          },\n        });\n      }\n    }\n    const schedules: Schedule[] = [\n      {\n        locomotives: [],\n        schedule: [\n          {\n            station: 'Engineering Pickup',\n            wait_conditions: [\n              {\n                compare_type: 'or',\n                type: 'full',\n              },\n            ],\n          },\n          {\n            station: 'Engineering Dropoff',\n            wait_conditions: [\n              {\n                compare_type: 'or',\n                type: 'inactivity',\n                ticks: 1800,\n              },\n            ],\n          },\n        ],\n      },\n    ];\n    schedules[0].locomotives.push(leadLocomotive.entity_number);\n    if (trailingLocomotive) {\n      schedules[0].locomotives.push(trailingLocomotive.entity_number);\n    }\n\n    return {\n      item: 'blueprint',\n      label: 'Engineering Provider',\n      entities: entities,\n      tiles: [],\n      icons: [],\n      schedules: schedules,\n      version: 77311705089,\n    };\n  }, [activeFluids, cars, other.dual, other.fuel]);\n  const book: BlueprintBook = useMemo(\n    () => ({\n      item: 'blueprint-book',\n      label: 'Engineering Stations',\n      blueprints: [\n        {\n          blueprint: receiverStation,\n          index: 0,\n        },\n        {\n          blueprint: providerStation,\n          index: 1,\n        },\n      ],\n      active_index: 0,\n      version: 77311705089,\n    }),\n    [providerStation, receiverStation]\n  );\n\n  const bookstring = useMemo(\n    () => `0${btoa(pako.deflate(JSON.stringify({ blueprint_book: book }), { to: 'string' }))}`,\n    [book]\n  );\n  return (\n    <div>\n      <h2>Blueprint String</h2>\n      <div style={{ border: '1px solid black', wordBreak: 'break-all', textAlign: 'left', margin: '0 100px 20px' }}>\n        <code>{bookstring}</code>\n      </div>\n      <button onClick={() => setShowUnpacked((showUnpacked) => !showUnpacked)}>\n        {showUnpacked ? 'Hide' : 'Show'} Unpacked\n      </button>\n      {showUnpacked && (\n        <div style={{ border: '1px solid black', wordBreak: 'break-all', textAlign: 'left', margin: '0 100px 20px' }}>\n          <pre>{JSON.stringify({ blueprint_book: book }, null, 2)}</pre>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport './App.css';\nimport { Fluids } from './views/Fluids';\nimport { Stacks } from './views/Stacks';\nimport { Other } from './views/Other';\nimport { BlueprintString } from './views/BlueprintString';\n\nfunction App() {\n  return (\n    <div className='App'>\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)' }}>\n        <Stacks />\n        <Fluids />\n        <Other />\n      </div>\n      <BlueprintString />\n    </div>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { configureStore } from '@reduxjs/toolkit';\nimport pako from 'pako';\nimport { Fluids } from './slices/Fluids';\nimport { Stacks } from './slices/Stacks';\nimport { Other } from './slices/Other';\nimport { init } from './Init';\n\nconst reducer = combineReducers({\n  fluids: Fluids.reducer,\n  stacks: Stacks.reducer,\n  other: Other.reducer,\n});\n\n// null is a valid thing to deserialize to, so it needs to be undefined explicitly\nconst loadState = () => {\n  const hash = window.location.hash.trim().slice(1);\n  try {\n    const serializedState =\n      hash !== '' ? pako.inflate(atob(hash), { to: 'string' }) : localStorage.getItem('state') || '';\n    if (serializedState === '') {\n      return undefined;\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nconst saveState = (state: StoreState) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    window.location.hash = btoa(pako.deflate(serializedState, { to: 'string' }));\n    localStorage.setItem('state', serializedState);\n  } catch {\n    // ignore write errors\n  }\n};\n\nexport const store = configureStore({\n  reducer,\n  devTools: process.env.NODE_ENV !== 'production',\n  preloadedState: loadState(),\n});\n\nstore.dispatch(init());\n\nstore.subscribe(() => {\n  saveState(store.getState());\n});\n\nexport type StoreState = ReturnType<typeof store.getState>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { store } from './store/Store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}